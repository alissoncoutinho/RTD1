@using Barragem.Models;
@model Barragem.Models.Torneio
@{
    Layout = "~/Views/Shared/_LayoutTorneio2.cshtml";
    Barragem.Models.InscricaoTorneio inscricao = null;
    if (ViewBag.inscricao != null)
    {
        inscricao = ViewBag.inscricao;
    }
}
<section class="content-header">
    <h1>Torneio</h1>
</section>
<section class="content">
    <div class="row">
        <!-- left column -->
        <div class="col-md-6">
            <!-- general form elements -->
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Detalhes</h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        @Html.LabelFor(m => m.nome, new { @class = "col-sm-3" })
                        <div class="col-sm-8 info-box-text">
                            @Html.Raw(Model.nome)
                        </div>
                    </div>
                    <div class="row">
                        @Html.Label("Período", new { @class = "col-sm-3" })
                        <div class="col-sm-8 info-box-text">
                            @Html.Raw(Model.dataInicio.ToShortDateString()) a @Html.Raw(Model.dataFim.ToShortDateString())
                        </div>
                    </div>
                    <!--div class="row">
                        Html.Label("Classes", new { class = "col-sm-3" })
                        <div class="col-sm-8 info-box-text">
                            Html.Raw(Model.qtddClasses)
                        </div>
                    </div-->
                    <div class="row">
                        @Html.Label("Repescagem", new { @class = "col-sm-3" })
                        <div class="col-sm-8 info-box-text">
                            @if (Model.temRepescagem)
                            {@Html.Raw("Sim") }
                        else
                        { @Html.Raw("Não")}
                        </div>
                    </div>
                    <div class="row">
                        @Html.Label("Premiação", new { @class = "col-sm-3" })
                        <div class="col-sm-8 info-box-text">
                            @Html.Raw(Model.premiacao)
                        </div>
                    </div>
                </div>
                <div class="box-footer">
                    <a href="@Url.Action("InscricoesTorneio2", new { torneioId = Model.Id })" class="btn btn-default" data-id="Model.Id" title="Inscritos">Ver Inscritos</a>
                </div>

            </div>
            <!-- /.box -->
        </div>
        <div class="col-md-6">
            <!-- Horizontal Form -->
            <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title">Inscrição</h3>
                </div>
                <!-- /.box-header -->
                <!-- form start -->
                @using (Html.BeginForm("Inscricao", "Torneio", FormMethod.Post, new { @class = "form-horizontal", @name = "formInscricao" }))
                {
                    @Html.Hidden("operacao", "inscricao")
                    @Html.Hidden("torneioId", Model.Id)
                    @Html.Hidden("vrInscricao", Model.valor);
                    @Html.Hidden("userId", inscricao == null ? 0 : inscricao.userId);

                    <div class="box-body">
                        <div class="row">
                            @if (inscricao == null)
                            {
                                @Html.Label("Uma Categoria", new { @class = "col-sm-5" })
                                <div class="col-sm-7 info-box-text">
                                    @if ((Model.valor == 0) || (ViewBag.isGratuito))
                                    {
                                        @Html.Raw("gratuito")
                                    }
                                    else
                                    {
                                        @Html.Raw("R$ " + Model.valor + ",00")
                                    }
                                </div>
                            }
                            else
                            {
                                @Html.Label("Valor Inscrição", new { @class = "col-sm-5" })
                                <div class="col-sm-7 info-box-text">
                                    @if ((Model.valor != 0) && (!ViewBag.isGratuito))
                                    {
                                        if ((inscricao.valorPendente != null) && (inscricao.valorPendente != 0))
                                        {
                                            @Html.Raw("R$ " + (inscricao.valor + inscricao.valorPendente) + ",00")
                                        }
                                        else
                                        {
                                            @Html.Raw("R$ " + inscricao.valor + ",00")
                                        }
                                    }
                                    else
                                    {
                                        @Html.Raw("gratuito")
                                    }
                                </div>
                            }
                        </div>
                        @if (inscricao != null)
                        {
                            <div class="row">
                                @Html.Label("Status Inscrição", new { @class = "col-sm-5" })
                                <div class="col-sm-7 info-box-text">
                                    @if ((Model.valor != 0) && (!ViewBag.isGratuito))
                                    {
                                        if ((inscricao.isAtivo) && ((inscricao.valorPendente == null) || (inscricao.valorPendente == 0)))
                                        {
                                            @Html.Raw(" Ativa")
                                        }
                                        else
                                        {
                                            @Html.Raw(inscricao.descricaoStatusPag + " Pendente")
                                        }
                                    }
                                </div>
                            </div>
                            if ((inscricao.valorPendente != null) && (inscricao.valorPendente != 0))
                            {
                                <div class="row">
                                    @Html.Label("Valor Pendente", new { @class = "col-sm-5" })
                                    <div class="col-sm-7 info-box-text">
                                        @if ((Model.valor != 0) && (!ViewBag.isGratuito))
                                        {
                                            @Html.Raw("R$ " + inscricao.valorPendente + ",00")
                                        }
                                        else
                                        {
                                            @Html.Raw("gratuito")
                                        }
                                    </div>
                                </div>
                            }
                        }

                        @if (inscricao == null)
                        {
                            if (Model.qtddCategoriasPorJogador > 1)
                            {
                                <div class="row">
                                    @Html.Label("Duas Categorias", new { @class = "col-sm-5" })
                                    <div class="col-sm-7 info-box-text">
                                        @if ((Model.valor == 0) || (ViewBag.isGratuito))
                                        {
                                            @Html.Raw("gratuito")
                                        }
                                        else
                                        {
                                            @Html.Raw("R$ " + Model.valor2 + ",00")
                                        }
                                    </div>
                                </div>
                            }
                            if (Model.qtddCategoriasPorJogador > 2)
                            {
                                <div class="row">
                                    @Html.Label("Três Categorias", new { @class = "col-sm-5" })
                                    <div class="col-sm-7 info-box-text">
                                        @if ((Model.valor == 0) || (ViewBag.isGratuito))
                                        {
                                            @Html.Raw("gratuito")
                                        }
                                        else
                                        {
                                            @Html.Raw("R$ " + Model.valor3 + ",00")
                                        }
                                    </div>
                                </div>
                            }
                            if (Model.qtddCategoriasPorJogador > 3)
                            {
                                <div class="row">
                                    @Html.Label("Quatro Categorias", new { @class = "col-sm-5" })
                                    <div class="col-sm-7 info-box-text">
                                        @if ((Model.valor == 0) || (ViewBag.isGratuito))
                                        {
                                            @Html.Raw("gratuito")
                                        }
                                        else
                                        {
                                            @Html.Raw("R$ " + Model.valor4 + ",00")
                                        }
                                    </div>
                                </div>
                            }
                            if ((Model.isDesconto != null && (bool)Model.isDesconto) && (inscricao == null))
                            {
                                <div class="row">
                                    @Html.Label("Desconto p/ " + Model.descontoPara + " de", new { @class = "col-sm-5" })
                                    <div class="col-sm-7 info-box-text">
                                        @Html.Raw("R$ " + Model.valorSocio + ",00")
                                    </div>
                                </div>
                            }
                            if ((Model.valorDescontoFederado != null) && (Model.valorDescontoFederado > 0))
                            {
                                <div class="row">
                                    @Html.Label("Desconto p/ federado de", new { @class = "col-sm-5" })
                                    <div class="col-sm-7 info-box-text">
                                        @Html.Raw("R$ " + Model.valorDescontoFederado + ",00")
                                    </div>
                                </div>
                            }
                            <div class="row">
                                @if (Model.StatusInscricao == (int)StatusInscricaoPainelTorneio.ABERTA)
                                {
                                    @Html.Label("Inscrições abertas", new { @class = "col-sm-5" })
                                }
                                else if (Model.StatusInscricao == (int)StatusInscricaoPainelTorneio.ENCERRADA)
                                {
                                    @Html.Label("Inscrições encerradas", new { @class = "col-sm-5" })
                                }
                                else
                                {
                                    @Html.Label("Inscrições até", new { @class = "col-sm-5" })
                                    <div class="col-sm-7 info-box-text">
                                        @Html.Raw(Model.DataFinalInscricoes.ToShortDateString())
                                    </div>
                                }
                            </div>
                            if (Model.isDesconto != null && (bool)Model.isDesconto)
                            {
                                <div class="row">
                                    <label id="labelIsSocio" class="col-sm-5">
                                        @Html.Raw("É " + Model.descontoPara + "? *")
                                    </label>
                                    <div class="col-sm-7 info-box-text">
                                        <input type="radio" name="isSocio" id="isSocio" value="true">Sim
                                        <input type="radio" name="isSocio" id="isSocio" value="false">Não
                                    </div>
                                </div>
                            }
                            if ((Model.valorDescontoFederado != null) && (Model.valorDescontoFederado > 0))
                            {
                                <div class="row">
                                    <label id="labelIsFederado" class="col-sm-5">
                                        @Html.Raw("É Federado? *")
                                    </label>
                                    <div class="col-sm-7 info-box-text">
                                        <input type="radio" name="isFederado" id="isFederado" value="true">Sim
                                        <input type="radio" name="isFederado" id="isFederado" value="false">Não
                                    </div>
                                </div>
                            }

                            <input type="hidden" name="totalCategoriasPorJogador" id="totalCategoriasPorJogador" value="@Model.qtddCategoriasPorJogador">

                            <!--Inscrição 1ª Categoria-->
                            <div class="row">
                                <input type="hidden" name="idInscricaoParceiroDupla" id="idInscricaoParceiroDupla" value="0">
                                @Html.Label("Categoria", new { @class = "col-sm-4" })
                                <div class="col-sm-8 info-box-text">
                                    <select name="classeInscricao" id="classeInscricao" data-totalCategorias="@Model.qtddCategoriasPorJogador" data-numCategoria="1" data-torneioId="@Model.Id" class="form-control" onchange="ValidarCategoriaSelecionada(this)">
                                        <option value="0">Selecione uma categoria...</option>
                                        @foreach (var item in ViewBag.Classes)
                                        {
                                            <option value="@item.Id" @if (ViewBag.ClasseInscricao == item.Id) { @Html.Raw("selected") }>@item.nome</option>
                                        }
                                    </select>
                                </div>
                            </div>

                            <!--Inscrição 2ª Categoria-->
                            if (Model.qtddCategoriasPorJogador > 1)
                            {
                                <div id="checkSegundaOpcaoClasse" class="form-group">
                                    <div class="col-sm-8">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" value="true" name="isSegundaOpcaoClasse" id="isSegundaOpcaoClasse" onclick="segundaOpcaoDeClasse()" /> @Html.Raw("Quero escolher mais uma categoria")
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div id="segundaOpcaoClasse" class="row">
                                    <input type="hidden" name="idInscricaoParceiroDupla2" id="idInscricaoParceiroDupla2" value="0">
                                    @Html.Label("2ª Opção", new { @class = "col-sm-4" })
                                    <div class="col-sm-8 info-box-text">
                                        <select id="classeInscricao2" name="classeInscricao2" data-totalCategorias="@Model.qtddCategoriasPorJogador" data-numCategoria="2" data-torneioId="@Model.Id" class="form-control" onchange="ValidarCategoriaSelecionada(this)">
                                            <option value="0">Selecione uma categoria...</option>
                                            @foreach (var item in ViewBag.Classes)
                                            {
                                                <option value="@item.Id" @if ((ViewBag.ClasseInscricao2 != null) && (ViewBag.ClasseInscricao2 == item.Id)) { @Html.Raw("selected") }>@item.nome</option>
                                            }
                                        </select>
                                    </div>
                                </div>

                            }

                            <!--Inscrição 3ª Categoria-->
                            if (Model.qtddCategoriasPorJogador > 2)
                            {
                                <div id="checkTerceiraOpcaoClasse" class="form-group">
                                    <div class="col-sm-8">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" value="true" name="isTerceiraOpcaoClasse" id="isTerceiraOpcaoClasse" onclick="terceiraOpcaoDeClasse()" /> @Html.Raw("Quero escolher mais uma categoria")
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div id="terceiraOpcaoClasse" class="row">
                                    <input type="hidden" name="idInscricaoParceiroDupla3" id="idInscricaoParceiroDupla3" value="0">
                                    @Html.Label("3ª Opção", new { @class = "col-sm-4" })
                                    <div class="col-sm-8 info-box-text">
                                        <select id="classeInscricao3" name="classeInscricao3" data-totalCategorias="@Model.qtddCategoriasPorJogador" data-numCategoria="3" data-torneioId="@Model.Id" class="form-control" onchange="ValidarCategoriaSelecionada(this)">
                                            <option value="0">Selecione uma categoria...</option>
                                            @foreach (var item in ViewBag.Classes)
                                            {
                                                <option value="@item.Id" @if ((ViewBag.ClasseInscricao3 != null) && (ViewBag.ClasseInscricao3 == item.Id)) { @Html.Raw("selected") }>@item.nome</option>
                                            }
                                        </select>
                                    </div>
                                </div>

                            }

                            <!--Inscrição 4ª Categoria-->
                            if (Model.qtddCategoriasPorJogador > 3)
                            {
                                <div id="checkQuartaOpcaoClasse" class="form-group">
                                    <div class="col-sm-8">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" value="true" name="isQuartaOpcaoClasse" id="isQuartaOpcaoClasse" onclick="quartaOpcaoDeClasse()" /> @Html.Raw("Quero escolher mais uma categoria")
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div id="quartaOpcaoClasse" class="row">
                                    <input type="hidden" name="idInscricaoParceiroDupla4" id="idInscricaoParceiroDupla4" value="0">
                                    @Html.Label("4ª Opção", new { @class = "col-sm-4" })
                                    <div class="col-sm-8 info-box-text">
                                        <select name="classeInscricao4" id="classeInscricao4" data-totalCategorias="@Model.qtddCategoriasPorJogador" data-numCategoria="4" data-torneioId="@Model.Id" class="form-control" onchange="ValidarCategoriaSelecionada(this)">
                                            <option value="0">Selecione uma categoria...</option>
                                            @foreach (var item in ViewBag.Classes)
                                            {
                                                <option value="@item.Id" @if ((ViewBag.ClasseInscricao4 != null) && (ViewBag.ClasseInscricao4 == item.Id)) { @Html.Raw("selected") }>@item.nome</option>
                                            }
                                        </select>
                                    </div>
                                </div>

                            }
                        }
                        else
                        {
                            <!--INSCRIÇÃO REALIZADA-->

                            <!--Inscrição 1ª Categoria-->
                            <div class="row">
                                <input type="hidden" name="idInscricaoParceiroDupla" id="idInscricaoParceiroDupla" value="0">
                                @Html.Label("Categoria", new { @class = "col-sm-4" })
                                <div class="col-sm-8 info-box-text">
                                    <select name="classeInscricao" id="classeInscricao" data-totalCategorias="@Model.qtddCategoriasPorJogador" data-numCategoria="1" data-torneioId="@Model.Id" class="form-control" onchange="ValidarCategoriaSelecionada(this)">
                                        <option value="0">Selecione uma categoria...</option>
                                        @foreach (var item in ViewBag.Classes)
                                        {
                                            <option value="@item.Id" @if (ViewBag.ClasseInscricao == item.Id) { @Html.Raw("selected") }>@item.nome</option>
                                        }
                                    </select>
                                </div>
                            </div>

                            <!--Inscrição 2ª Categoria-->
                            if (Model.qtddCategoriasPorJogador > 1)
                            {
                                <div id="checkSegundaOpcaoClasse" class="form-group">
                                    <div class="col-sm-8">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" value="true" name="isSegundaOpcaoClasse" id="isSegundaOpcaoClasse" onclick="segundaOpcaoDeClasse()"
                                                       @if (ViewBag.ClasseInscricao2 != null) { @Html.Raw("checked") } />
                                                @Html.Raw("Quero escolher mais uma categoria")
                                            </label>

                                        </div>

                                    </div>

                                </div>

                                <div id="segundaOpcaoClasse" class="row">
                                    <input type="hidden" name="idInscricaoParceiroDupla2" id="idInscricaoParceiroDupla2" value="0">
                                    @Html.Label("2ª Opção", new { @class = "col-sm-4" })
                                    <div class="col-sm-8 info-box-text">
                                        <select id="classeInscricao2" name="classeInscricao2" data-totalCategorias="@Model.qtddCategoriasPorJogador" data-numCategoria="2" data-torneioId="@Model.Id" class="form-control" onchange="ValidarCategoriaSelecionada(this)">
                                            <option value="0">Selecione uma categoria...</option>
                                            @foreach (var item in ViewBag.Classes)
                                            {
                                                <option value="@item.Id" @if ((ViewBag.ClasseInscricao2 != null) && (ViewBag.ClasseInscricao2 == item.Id)) { @Html.Raw("selected") }>@item.nome</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                            }

                            <!--Inscrição 3ª Categoria-->
                            if (Model.qtddCategoriasPorJogador > 2)
                            {
                                <div id="checkTerceiraOpcaoClasse" class="form-group">
                                    <div class="col-sm-8">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" value="true" name="isTerceiraOpcaoClasse" id="isTerceiraOpcaoClasse" onclick="terceiraOpcaoDeClasse()"
                                                       @if (ViewBag.ClasseInscricao3 != null) { @Html.Raw("checked") } />
                                                @Html.Raw("Quero escolher mais uma categoria")
                                            </label>

                                        </div>

                                    </div>

                                </div>
                                <div id="terceiraOpcaoClasse" class="row">
                                    <input type="hidden" name="idInscricaoParceiroDupla3" id="idInscricaoParceiroDupla3" value="0">
                                    @Html.Label("3ª Opção", new { @class = "col-sm-4" })
                                    <div class="col-sm-8 info-box-text">
                                        <select name="classeInscricao3" id="classeInscricao3" data-totalCategorias="@Model.qtddCategoriasPorJogador" data-numCategoria="3" data-torneioId="@Model.Id" class="form-control" onchange="ValidarCategoriaSelecionada(this)">
                                            <option value="0">Selecione uma categoria...</option>
                                            @foreach (var item in ViewBag.Classes)
                                            {
                                                <option value="@item.Id" @if ((ViewBag.ClasseInscricao3 != null) && (ViewBag.ClasseInscricao3 == item.Id)) { @Html.Raw("selected") }>@item.nome</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                            }

                            <!--Inscrição 4ª Categoria-->
                            if (Model.qtddCategoriasPorJogador > 3)
                            {
                                <div id="checkQuartaOpcaoClasse" class="form-group">
                                    <div class="col-sm-8">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" value="true" name="isQuartaOpcaoClasse" id="isQuartaOpcaoClasse" onclick="quartaOpcaoDeClasse()"
                                                       @if (ViewBag.ClasseInscricao4 != null) { @Html.Raw("checked") } />
                                                @Html.Raw("Quero escolher mais uma categoria")
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div id="quartaOpcaoClasse" class="row">
                                    <input type="hidden" name="idInscricaoParceiroDupla4" id="idInscricaoParceiroDupla4" value="0">
                                    @Html.Label("4ª Opção", new { @class = "col-sm-4" })
                                    <div class="col-sm-8 info-box-text">
                                        <select id="classeInscricao4" name="classeInscricao4" data-totalCategorias="@Model.qtddCategoriasPorJogador" data-numCategoria="4" data-torneioId="@Model.Id" class="form-control" onchange="ValidarCategoriaSelecionada(this)">
                                            <option value="0">Selecione uma categoria...</option>
                                            @foreach (var item in ViewBag.Classes)
                                            {
                                                <option value="@item.Id" @if ((ViewBag.ClasseInscricao4 != null) && (ViewBag.ClasseInscricao4 == item.Id)) { @Html.Raw("selected") }>@item.nome</option>
                                            }
                                        </select>
                                    </div>
                                </div>
                            }
                        }

                        @if (!String.IsNullOrEmpty(Model.observacao))
                        {
                            <br>
                            <div class="boxPadrao">
                                <div class="row">
                                    <div class="col-sm-12">@Html.Raw(Model.observacao)</div>
                                </div>
                                <div class="row form-group">
                                    @if (inscricao == null)
                                    {
                                        <div class="col-sm-12"><input type="text" placeholder="Responda aqui..." name="observacao" class="form-control"></div>
                                    }
                                    else
                                    {
                                        <div class="col-sm-12">@Html.Raw(inscricao.observacao)</div>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                    <!-- /.box-body -->
                    <div class="box-footer">
                        @if (Model.PermitirInscricoes)
                        {
                            if (inscricao != null)
                            {
                                <div class="btn-group-vertical col-xs-12 col-sm-6">
                                    @if ((inscricao.valorPendente != null && inscricao.valorPendente != 0) || (((String.IsNullOrEmpty(inscricao.statusPagamento) || (inscricao.statusPagamento != "3" && inscricao.statusPagamento != "4")) && !inscricao.isAtivo) && Model.valor != 0 && (!ViewBag.isGratuito)))
                                    {
                                        if (ViewBag.isAceitaCartao)
                                        {
                                            <a href="@Url.Action("ConfirmacaoInscricao", new { torneioId = inscricao.torneioId, msg="Inscrição realizada." })" class="btn btn-success" title="Efetuar Pagamento">PIX</a>
                                        }
                                        if ((Model.dadosBancarios != null) && (Model.dadosBancarios.Length > 100))
                                        {
                                            <button class="btn btn-success transferenciaButton" title="Transferência bancária">Transferência</button>
                                        }
                                    }
                                </div>
                                <div class="col-xs-12 col-sm-4 pull-right">
                                    @if (((String.IsNullOrEmpty(inscricao.statusPagamento) || (inscricao.statusPagamento != "3" && inscricao.statusPagamento != "4")) && !inscricao.isAtivo))
                                    {
                                        <button type="button" class="btn btn-danger col-xs-12 pull-right confirmCancel">Cancelar</button>
                                    }
                                    <a href="@Url.Action("AlterarClasse", new { torneioId = Model.Id })" class="btn btn-info col-xs-12" title="Salvar alterações" onclick="AlterarCategoria()">Salvar alterações</a>
                                </div>
                            }
                            else
                            {
                                <button type="submit" id="btnIncricao" class="btn btn-info pull-right validarSeSocioOuFederado">Inscrever-me</button>
                            }
                        }
                        else
                        {
                            if (inscricao != null)
                            {
                                <div class="col-xs-12 col-sm-6">
                                    @if ((inscricao.valorPendente != null && inscricao.valorPendente != 0) || (((String.IsNullOrEmpty(inscricao.statusPagamento) || (inscricao.statusPagamento != "3" && inscricao.statusPagamento != "4")) && !inscricao.isAtivo) && Model.valor != 0 && (!ViewBag.isGratuito)))
                                    {
                                        if (ViewBag.isAceitaCartao)
                                        {
                                            <a href="@Url.Action("ConfirmacaoInscricao", new { torneioId = inscricao.torneioId, msg="Inscrição realizada." })" class="btn btn-success" title="Efetuar Pagamento">PIX</a>
                                        }
                                        if ((Model.dadosBancarios != null) && (Model.dadosBancarios.Length > 100))
                                        {
                                            <button class="btn btn-success transferenciaButton" title="Transferência bancária">Transferência</button>
                                        }
                                    }
                                </div>

                            }
                            @Html.Raw("<span style='color:red'>Inscrições Encerradas.</span>")
                        }
                    </div>
                    <!-- /.box-footer -->
                }
            </div>
            <!-- /.box -->
        </div>
        <!--/.col (right) -->
    </div>
    <!-- /.row -->
    <div class="row exibir-dadosbancarios" id="dadosBancarios">
        <div class="box box-warning">
            <div class="box-header with-border">
                <h3 class="box-title">Transferência</h3>
            </div>
            <div class="box-body">
                @if (inscricao != null)
                {
                    if (inscricao.valorPendente == null || inscricao.valorPendente == 0)
                    {
                        <p><b>Valor:</b> R$ @inscricao.valor ,00</p>
                    }
                    else
                    {
                        <p><b>Valor:</b> R$ @inscricao.valorPendente ,00</p>
                    }
                }
                @Html.Raw(Model.dadosBancarios)
            </div>

        </div>
    </div>
</section>

@Html.Partial("_PartialEscolhaDupla")

@section Scripts {
    <script type="text/javascript">
        $(document).ready(function () {
            $(".confirmCancel").confirm({
                title: "Confirmação",
                content: "Aperte SIM para confirmar o cancelamento da inscrição!",
                buttons: {
                    sim: {
                        text: 'Sim',
                        btnClass: 'btn-primary',
                        action: function () {
                            document.formInscricao.operacao.value = "cancelar";
                            document.formInscricao.submit();
                        }
                    },
                    cancelar: function () {

                    }
                }
            });


            if (document.getElementById("totalCategoriasPorJogador").value > 1) {
                if (!document.getElementById('isSegundaOpcaoClasse').checked) {
                    document.getElementById('segundaOpcaoClasse').style.opacity = "0";
                    document.getElementById('segundaOpcaoClasse').style.display = "none";
                    document.getElementById('checkSegundaOpcaoClasse').style.opacity = "0";
                    document.getElementById('checkSegundaOpcaoClasse').style.display = "none";
                }
                @if (inscricao != null) {
                    @Html.Raw("document.getElementById('checkSegundaOpcaoClasse').style.opacity = '1'; document.getElementById('checkSegundaOpcaoClasse').style.display = 'block'; ");
                }
            }
            if (document.getElementById("totalCategoriasPorJogador").value > 2) {
                if ((document.getElementById('isTerceiraOpcaoClasse') != null) && (!document.getElementById('isTerceiraOpcaoClasse').checked)) {
                    document.getElementById('terceiraOpcaoClasse').style.opacity = "0";
                    document.getElementById('terceiraOpcaoClasse').style.display = "none";
                    document.getElementById('checkTerceiraOpcaoClasse').style.opacity = "0";
                    document.getElementById('checkTerceiraOpcaoClasse').style.display = "none";
                }
                @if (inscricao != null) {
                    @Html.Raw("if ((document.getElementById('isSegundaOpcaoClasse').checked)&&(document.getElementById('isTerceiraOpcaoClasse')!=null)) { document.getElementById('checkTerceiraOpcaoClasse').style.opacity = '1'; document.getElementById('checkTerceiraOpcaoClasse').style.display = 'block'; }");
                }
            }
            if (document.getElementById("totalCategoriasPorJogador").value > 3) {
                if ((document.getElementById('isQuartaOpcaoClasse') != null) && (!document.getElementById('isQuartaOpcaoClasse').checked)) {
                    document.getElementById('quartaOpcaoClasse').style.opacity = "0";
                    document.getElementById('quartaOpcaoClasse').style.display = "none";
                    document.getElementById('checkQuartaOpcaoClasse').style.opacity = "0";
                    document.getElementById('checkQuartaOpcaoClasse').style.display = "none";
                }
                @if (inscricao != null) {
                    @Html.Raw("if ((document.getElementById('isTerceiraOpcaoClasse')!=null) && (document.getElementById('isTerceiraOpcaoClasse').checked)&&(document.getElementById('isQuartaOpcaoClasse')!=null)) { document.getElementById('checkQuartaOpcaoClasse').style.opacity = '1'; document.getElementById('checkQuartaOpcaoClasse').style.display = 'block'; }");
                }
            }

        });

        function ValidarCategoriaSelecionada(el) {
            var categoriaSelecionada = el.value;
            var torneioId = el.dataset.torneioid;
            if (categoriaSelecionada > 0) {
                ValidarDisponibilidadeInscricao(torneioId, categoriaSelecionada, el);
            }
        }

        function ValidarDisponibilidadeInscricao(torneioId, categoriaId, dropDown) {

            $.ajax({
                type: "GET",
                url: "/Account/ValidarDisponibilidadeInscricao?torneioId=" + torneioId + "&categoriaId=" + categoriaId,
                dataType: "json",
                traditional: true,
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    if (typeof response == "object") {
                        if (response.status == "ERRO") {
                            toastr.error(response.erro, "Erro");
                        }
                        else if (response.status == "ESGOTADO") {
                            dropDown.value = "0";

                            $.alert({
                                title: '<a style=\'color:red\'> ATENÇÃO! </a>',
                                content: 'Não é possível se inscrever nesta categoria pois não há mais vagas.'
                            });
                        }
                        else if (response.status == "ESCOLHER_DUPLA") {
                            CarregarTabelaFormacaoDupla(response.retorno, dropDown);
                            document.getElementById("nomeSelectCategoria").value = dropDown.id;
                            $("#modalMontarDupla").modal('show');
                        }
                        else {
                            ValidarInscricaoMultiplasCategorias(dropDown);
                        }
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    toastr.error(errorThrown, "Erro");
                }
            });
        }

        function CarregarTabelaFormacaoDupla(dados, el) {
            LimparTabelaFormacaoDupla();
            var table = document.getElementById("tblFormacaoDupla");
            for (var i = 0; i < dados.length; i++) {
                var row = table.insertRow(1);
                row.innerHTML = "<td>" + dados[i].Nome + "</td><td>" + "<button title=\"Escolher dupla\" data-numCategoria=\"" + el.dataset.numcategoria + "\" data-userid=\"" + dados[i].UserId + "\" data-id=\"" + dados[i].Id + "\" class=\"col-lg-12 col-xs-12 btn btn-primary btn-xs\" onclick=\"SelecionarParceiro(this)\">Escolher</button>" + "</td>";
            }
        }

        function LimparTabelaFormacaoDupla() {
            var linhas = document.getElementById("tblFormacaoDupla").rows;
            var i = 0;
            for (var i = linhas.length - 1; i > 0; i--) {
                document.getElementById("tblFormacaoDupla").deleteRow(i);
            }
        }

        function SelecionarParceiro(el) {
            var idInscricao = el.dataset.id;
            AplicarDuplaEscolhida(idInscricao, el.dataset.numcategoria);
            $("#modalMontarDupla").modal('hide');

            var nomeCombo = document.getElementById("nomeSelectCategoria").value;
            ValidarInscricaoMultiplasCategorias(document.getElementById(nomeCombo));
        }

        function ValidarInscricaoMultiplasCategorias(el) {
            if (el.dataset.totalcategorias > el.dataset.numcategoria && el.dataset.numcategoria == "1") {
                document.getElementById('checkSegundaOpcaoClasse').style.opacity = "1";
                document.getElementById('checkSegundaOpcaoClasse').style.display = "block";
                PerguntarInscricaoNovaCategoria("1");
            }
            else if (el.dataset.totalcategorias > el.dataset.numcategoria && el.dataset.numcategoria == "2") {
                document.getElementById('checkTerceiraOpcaoClasse').style.opacity = "1";
                document.getElementById('checkTerceiraOpcaoClasse').style.display = "block";
                PerguntarInscricaoNovaCategoria("2");
            }
            else if (el.dataset.totalcategorias > el.dataset.numcategoria && el.dataset.numcategoria == "3") {
                document.getElementById('checkQuartaOpcaoClasse').style.opacity = "1";
                document.getElementById('checkQuartaOpcaoClasse').style.display = "block";
                PerguntarInscricaoNovaCategoria("3");
            }
        }

        function PerguntarInscricaoNovaCategoria(numCategoria) {
            $.confirm({
                title: "",
                content: "Deseja jogar em mais uma categoria?",
                buttons: {
                    sim: {
                        text: 'Sim',
                        btnClass: 'btn-primary',
                        action: function () {
                            ValidarRespostaPerguntaInscricaoNovaCategoria(numCategoria);
                        }
                    },
                    cancelar: { text: 'Não' }
                }
            });
        }

        function AplicarDuplaEscolhida(idInscricao, numCategoria) {
            if (numCategoria == "1") {
                document.getElementById('idInscricaoParceiroDupla').value = idInscricao;
            }
            else if (numCategoria == "2") {
                document.getElementById('idInscricaoParceiroDupla2').value = idInscricao;
            }
            else if (numCategoria == "3") {
                document.getElementById('idInscricaoParceiroDupla3').value = idInscricao;
            }
            else if (numCategoria == "4") {
                document.getElementById('idInscricaoParceiroDupla4').value = idInscricao;
            }
        }

        function ValidarRespostaPerguntaInscricaoNovaCategoria(numCategoria) {
            if (numCategoria == "1") {
                document.getElementById('isSegundaOpcaoClasse').checked = true;
                segundaOpcaoDeClasse();
            }
            else if (numCategoria == "2") {
                document.getElementById('isTerceiraOpcaoClasse').checked = true;
                terceiraOpcaoDeClasse();
            }
            else if (numCategoria == "3") {
                document.getElementById('isQuartaOpcaoClasse').checked = true;
                quartaOpcaoDeClasse();
            }
        }

        function segundaOpcaoDeClasse() {
            if (document.getElementById('isSegundaOpcaoClasse').checked) {
                document.getElementById('segundaOpcaoClasse').style.opacity = "1";
                document.getElementById('segundaOpcaoClasse').style.display = "block";
            } else {
                document.getElementById('classeInscricao2').selectedIndex = 0;
                document.getElementById('segundaOpcaoClasse').style.opacity = "0 !important";
                document.getElementById('segundaOpcaoClasse').style.display = "none";

            }
            RemoverCategoriaSelecionada();
        }

        function terceiraOpcaoDeClasse() {
            if (document.getElementById('isTerceiraOpcaoClasse').checked) {
                document.getElementById('terceiraOpcaoClasse').style.opacity = "1";
                document.getElementById('terceiraOpcaoClasse').style.display = "block";
            } else {
                document.getElementById('classeInscricao3').selectedIndex = 0;
                document.getElementById('terceiraOpcaoClasse').style.opacity = "0 !important";
                document.getElementById('terceiraOpcaoClasse').style.display = "none";

            }
            RemoverCategoriaSelecionada();
        }

        function quartaOpcaoDeClasse() {
            if (document.getElementById('isQuartaOpcaoClasse').checked) {
                document.getElementById('quartaOpcaoClasse').style.opacity = "1";
                document.getElementById('quartaOpcaoClasse').style.display = "block";
            } else {
                document.getElementById('classeInscricao4').selectedIndex = 0;
                document.getElementById('quartaOpcaoClasse').style.opacity = "0 !important";
                document.getElementById('quartaOpcaoClasse').style.display = "none";

            }
            RemoverCategoriaSelecionada();
        }

        function RemoverCategoriaSelecionada() {
            var categoria1Selecionada = $("#classeInscricao").val();
            var categoria2Selecionada = $("#classeInscricao2").val();
            var categoria3Selecionada = $("#classeInscricao3").val();

            var qtdeCategoriasTorneio = document.getElementById("totalCategoriasPorJogador").value;

            if (qtdeCategoriasTorneio > 1) {
                if (categoria1Selecionada != 0) {
                    $("#classeInscricao2").find('[value="' + categoria1Selecionada + '"]').remove();
                }
            }
            if (qtdeCategoriasTorneio > 2) {
                if (categoria1Selecionada != 0) {
                    $("#classeInscricao3").find('[value="' + categoria1Selecionada + '"]').remove();
                }
                if (categoria2Selecionada != 0) {
                    $("#classeInscricao3").find('[value="' + categoria2Selecionada + '"]').remove();
                }
            }
            if (qtdeCategoriasTorneio > 3) {
                if (categoria1Selecionada != 0) {
                    $("#classeInscricao4").find('[value="' + categoria1Selecionada + '"]').remove();
                }
                if (categoria2Selecionada != 0) {
                    $("#classeInscricao4").find('[value="' + categoria2Selecionada + '"]').remove();
                }
                if (categoria3Selecionada != 0) {
                    $("#classeInscricao4").find('[value="' + categoria3Selecionada + '"]').remove();
                }
            }

        }

        function CancelarEscolhaDupla() {
            var nomeCombo = document.getElementById("nomeSelectCategoria").value;
            document.getElementById(nomeCombo).value = "0";
            $("#modalMontarDupla").modal('hide');
        }

        function AlterarCategoria() {
            $.confirm({
                title: "Confirmação",
                content: "Aperte SIM para confirmar a alteração de classe!",
                buttons: {
                    sim: {
                        text: 'Sim',
                        btnClass: 'btn-primary',
                        action: function () {
                            document.formInscricao.operacao.value = "alterarClasse";
                            document.formInscricao.submit();
                        }
                    },
                    cancelar: function () {

                    }
                }
            });
        }

        $(".transferenciaButton").click(function (event) {
            event.preventDefault();
            var element = document.getElementById("dadosBancarios");
            element.classList.add("show");
        });


        $(".validarSeSocioOuFederado").click(function (event) {
            event.preventDefault();
            var radioButtons = document.getElementsByName("isSocio");
            var radioButtonsFed = document.getElementsByName("isFederado");
            var labelisSocio = document.getElementById("labelIsSocio");
            var labelisFederado = document.getElementById("labelIsFederado");
            if ((document.getElementById('isSegundaOpcaoClasse') != null) && (document.getElementById('isSegundaOpcaoClasse').checked) && (document.getElementById('classeInscricao2').selectedIndex == 0)) {
                alert("Favor informar a 2ª opção de classe.");
                return false;
            } else if ((document.getElementById('isTerceiraOpcaoClasse') != null) && (document.getElementById('isTerceiraOpcaoClasse').checked) && (document.getElementById('classeInscricao3').selectedIndex == 0)) {
                alert("Favor informar a 3ª opção de classe.");
                return false;
            } else if ((document.getElementById('isQuartaOpcaoClasse') != null) && (document.getElementById('isQuartaOpcaoClasse').checked) && (document.getElementById('classeInscricao4').selectedIndex == 0)) {
                alert("Favor informar a 4ª opção de classe.");
                return false;
            } else if ((labelisSocio != null) && (radioButtons[0].checked == false) && (radioButtons[1].checked == false)) {
                alert("Favor informar se você é sócio ou não.");
                labelisSocio.style.color = "red";
                return false;
            } else if ((labelisFederado != null) && (radioButtonsFed[0].checked == false) && (radioButtonsFed[1].checked == false)) {
                alert("Favor informar se você é federado ou não.");
                labelisFederado.style.color = "red";
                return false;
            } else {
                document.formInscricao.submit();
            }
        });
    </script>
}